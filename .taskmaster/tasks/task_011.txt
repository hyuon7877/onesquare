# Task ID: 11
# Title: 매출 관리 시스템
# Status: done
# Dependencies: 3, 5
# Priority: high
# Description: Notion 연동 매출 데이터 관리 및 권한별 접근 제어
# Details:
Notion 매출 데이터 읽기, 권한별 접근 제어, 매출 통계 및 차트, AI 기반 예측, 금액 마스킹

# Test Strategy:
권한별 매출 접근 테스트, 데이터 마스킹 테스트, 통계 정확도 테스트

# Subtasks:
## 1. Notion 매출 데이터베이스 구조 설계 [done]
### Dependencies: None
### Description: 매출 관리를 위한 Notion 데이터베이스 스키마 설계 및 Django 모델 매핑
### Details:
- 매출 항목별 데이터 구조 정의 (프로젝트별, 고객별, 월별 매출)
- 권한별 접근 제어를 위한 데이터 분류 체계 설계
- Django 모델과 Notion 데이터베이스 필드 매핑 정의
- 매출 집계를 위한 계산 필드 및 관계 설정

## 2. 권한별 매출 데이터 접근 제어 [done]
### Dependencies: None
### Description: 6개 사용자 그룹별 매출 데이터 접근 권한 및 마스킹 시스템 구현
### Details:
- 최고관리자: 전체 매출 데이터 접근
- 중간관리자: 담당 부서/팀 매출만 접근
- 팀원: 본인 관련 매출만 제한적 접근
- 파트너/도급사: 해당 프로젝트 매출만 부분적 접근
- 민감 정보 마스킹 처리 (금액 부분 숨김 등)
- API 레벨에서의 권한 검증 및 필터링

## 3. 매출 통계 및 리포트 생성 [done]
### Dependencies: None
### Description: 다양한 관점의 매출 통계 분석 및 자동 리포트 생성 기능
### Details:
- 월별/분기별/연도별 매출 통계 계산
- 프로젝트별, 고객별, 담당자별 매출 분석
- 매출 목표 대비 달성률 계산 및 시각화
- 엑셀/PDF 형태의 매출 리포트 자동 생성
- 매출 증감률 및 트렌드 분석 알고리즘

## 4. 매출 데이터 실시간 동기화 [done]
### Dependencies: None
### Description: Notion과 Django 간 매출 데이터 실시간 동기화 및 무결성 보장
### Details:
- Notion API를 통한 매출 데이터 실시간 가져오기
- 데이터 변경사항 감지 및 자동 동기화 시스템
- 동기화 실패 시 재시도 및 에러 처리 로직
- 데이터 무결성 검증 및 충돌 해결 메커니즘
- 동기화 상태 모니터링 및 로깅

## 5. 매출 알림 및 대시보드 통합 [done]
### Dependencies: None
### Description: 매출 목표 달성, 이상 징후 감지 시 알림 및 대시보드 위젯 통합
### Details:
- 매출 목표 달성률에 따른 자동 알림 시스템
- 매출 급감/급증 이상 패턴 감지 및 경고 알림
- 관리자 대시보드에 매출 현황 위젯 통합
- 월말/분기말 매출 마감 알림 및 리포트 자동 발송
- PWA 푸시 알림을 통한 중요 매출 정보 실시간 전달

